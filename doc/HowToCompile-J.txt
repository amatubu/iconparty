// コンパイル方法 //CodeWarriorで作成したソースなのでCodeWarriorでコンパイルするのが一番確実だと思います。確認はしていませんが、MPWでもおそらく大丈夫かとは思います。// ソース以外に必要なもの	Interface & Libraries 3.4		Appleのページからダウンロードできます。3.3、3.2でも一部修正すれば大丈夫かと。	MoreFiles 1.5		一部のファイル処理で使用しています。		Appleのページからダウンロードできます。		ソースファイルとヘッダファイルが必要です。ライブラリとヘッダファイルでもokです。		1.5はCarbonSDK 1.0.2（同1.0.4）に入っています。1.4.9は、以下。		1.4.9には、TruncPStringにバグがあるような気がするのでできれば1.5を御使用ください。		ftp://ftp.apple.com/developer/Sample_Code/Files/MoreFiles.sit	Infinity Windoid 3.0.1		フローティングウィンドウの処理に使用しています。		Info-macなどで探せば見つかると思います。		Infinity Windoid/68k、InfinityWindoid.h、WindowExtensions.c、WindowExtensions.hが必要です。		ftp://ftp.web.ad.jp/info-mac/dev/src/infinity-windoid-wdef-30-c.hqx	(Jims CDEFs v1.51)		初期設定ダイアログで、Tab Panel、Sliderを使用しています。これらについてはCDEF68k.rsrcにリソースとして		入っていますのでPPCバージョンを作ろうという場合以外は気にしなくても構いません。		ftp://ftp.web.ad.jp/pub/mirrors/info-mac/dev/lib/jims-cdefs-15.hqx		ftp://ftp.web.ad.jp/pub/mirrors/info-mac/dev/lib/jims-cdefs-151-updt.hqx	Wacom.h		タブレット処理に使用しています。		ワコムのページからダウンロードできます。		http://www.wacom.co.jp/	StdGetFolder.c 1.0.4 / StdGetFolder.rsrc		六角文雄さん作成のフォルダ選択ダイアログ用のソース／リソースです。Vectorなどで手に入ると思います。		http://www.vector.co.jp/soft/mac/prog/se031704.html	Find_icon		8.5以前の環境でファイルのアイコンを取得するために使用しています。		http://users.aol.com/jwwalker/	libpng 1.0.5、およびzlib 1.1.3		PNGのエンコードおよびデコードに使用しています。		http://www.cdrom.com/pub/png/		からソースファイルが手に入ります。Mac用のプロジェクトファイルなどは、バージョンが古いですが		http://www.cwi.nl/~jack/index.html		で手に入れることができます。ファイルを新しいものと入れ替えて若干手直しすればライブラリができるはずです。	InternetConfig Programming Kit 1.4		サポートWebのボタンの処理で使用しています。		ftp://ftp.share.com/internet-configuration/		ftp://ftp.web.ad.jp/pub/mirrors/info-mac/dev/lib/ic-prog-kit-14.hqx// コンパイル手順まず、IconList_LDEF.cおよびPenSize_MDEF.cをコンパイルし、コードリソースを作成します。それぞれリソースタイプはLDEFおよびMDEF、リソースIDはどちらも128としてください。次に、残りのソースと上記のファイル、およびリソースファイルをまとめてコンパイルすれば完成となりますが、もしうまくいかないという場合には報告をお願いします。// libpng、zlibに関する注意点上記のURLで手に入るMac用のライブラリ作成プロジェクトファイルでは、68K用のライブラリで4byte int、8byte doubleを使う設定にしてあります。これをこのまま使う場合、IconPartyもそれにあわせる必要があります。また、MSLのライブラリも同様です。IconPartyの設定を変更したくない場合はそれにあわせてライブラリをコンパイルし直す必要があります。// プロジェクトに追加するもの上記のコードリソース用ソース以外のソースファイル	MoreFilesのソースファイル	Inifinity Windoidのソースファイルおよびリソースファイル	各リソースファイル	MacOS.Lib	Navigation.o	AEObjectSupportLib.o		Find_icon.68K.A5.Lib						// Find_icon	MoreFilesCW.68k(d)							// MoreFiles		ICGlue.o									// InternetConfig		png.68k.Lib		(png.68k.4i8d.Lib)			// libpng	zlib.68k.Lib	(zlib.68k.4i8d.Lib)			// zlib		MSL Runtime68K.Lib	MSL C.68K Fa(2i).Lib	(MSL C.68K Fa(4i_8d).Lib)	MSL C++.68K Fa(2i).Lib	(MSL C++.68K Fa(4i_8d).Lib)	MathLib68K Fa(2i).Lib	(MathLib68K Fa(4i_8d).Lib)	console.stubs.c			(MSL SIOUX.68K.Lib)	ちなみに、うちのプロジェクトの場合にはMain	IconParty.c	AE Install.c	CustomSaveDialog.c	defineGlobals.c	Edit.c	Files.c	menus.c	paint.c	Preferences.c	tools.c	Useful Routines.c	window.c	WindowExtensions.c	TabletUtils.c	IconRoutines.c	IconFamilyWindow.c	IconListWindow.c	IPIconSupport.c	GifEncode-miGIF.c	StdGetFolder.c	PNGSupport.c	ExternalEditorSupport.c	DebugMode.c	PreCarbonSupport.cMacOS Lib	MacOS.lib	MathLib68K (2i).Lib	AEObjectSupportLib.oNavigation	NavigationServicesSupport.c	Navigation.oResources	Icon Party.rsrc	Useful.rsrc	IconParty.r	StdGetFolder.rsrc	PenSize_MDEF.rsrc	IconListLDEF.rsrc	CDEF68k.rsrc	Infinity Windoid/68K	Dot Mode Font.rsrcHeaders	IconParty.h	UsefulRoutines.h	InfinityWindoid.h	WindowExtensions.h	FileRoutines.h	definition.h	TabletUtils.h	menuRoutines.h	IconRoutines.h	ImageCompression.h	MoreDesktopMgr.h	MoreFiles.h	MoreFilesExtras.h	Search.h	FullPath.h	NavigationServicesSupport.h	Preferences.h	Wacom.h	Drag.h	Globals.h	DebugMode.h	PreCarbonSupport.hMore Files Lib	MoreFiles 68K LibFind_icon Lib	Find_icon.68K.A5.LibMSL	MSL Runtime68K.Lib	MSL C++.68K (2i).Lib	MSL C.68K (2i).Lib	console.stubs.clibpng	png.68k.Libzlib	zlib.68k.LibInternetConfig	ICSupport.c	ICGlue.oという感じにセグメントを分割しています。分割をしないと、おそらくSmartコードモデルではリンクできないと思います。// PPCバージョンを作る場合IconPartyのPPCバージョンは公開されていませんが、これを作りたい場合は必要なライブラリを追加しなければいけません。以下が必要となるライブラリのリストです。ライブラリは必ずImport Weakをチェックするようにしましょう。ソースファイルについては一切いじる必要はありません。	MDEF		AppearanceLib	アプリケーション		AppearanceLib		ContextualMenu		DragLib		FontManager		IconServicesLib		NavigationLib		TranslationLib		QuickTimeLib		MathLib		WindowsLib				MSL RuntimePPC.Lib		MSL C.PPC.Lib		MSL C++.PPC.Lib				Find_icon.PPC.Lib					// Find_icon		MoreFiles PPC Lib					// MoreFiles		ICGlueCFM-PPC.lib					// InternetConfig		png.ppc.Lib							// libpng		zlib.ppc.Lib						// zlib// Carbonバージョンを作る場合#define	TARGET_API_MAC_CARBON	1と書かれたファイルをプリフィックスファイルとして指定すればokです。Rezの方も指定してください。ライブラリは、AppearanceLibなどは不要で、代わりにCarbonLibを追加してください。Carbon版ではWDEF、CDEFは使用していませんので必要ありません。LDEF、MDEFを作成する2つのソースはアプリケーション自体と一緒に入れてください。StdGetFolder、InternetConfigのライブラリ、Find_iconのライブラリも必要ありません。MoreFilesは1.5以降を使用してください。// 英語バージョンを作る場合リソースのIconParty(J).rsrcをはずし、代わりにIconParty(E).rsrcを入れます。さらに、EnglishVer.pchをPrefix Fileとして読み込むようにしてください。バルーンヘルプ等一部英語化されていないところがありますが、このあたりも徐々に対応していくつもりです。// 補足Find_iconは内部でMoreFilesを使用しているので、ライブラリを使用するとリンク時にWarningが出ることがあります。気になる場合は、MoreFilesなしでライブラリを作りなおすか、Find_iconのソース自体を使うなどして対処してください。Warningを無視しても構わないと思いますが（Link OptionsのSuppress Warning Messagesをチェックすると楽）---	01.06.24	naoki iimura<amatubu@mac.com>